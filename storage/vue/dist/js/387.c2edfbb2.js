"use strict";(self["webpackChunkmanager_vue"]=self["webpackChunkmanager_vue"]||[]).push([[387],{387:function(e,t,s){s.r(t),s.d(t,{default:function(){return f}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper"},[t("div",{staticStyle:{margin:"200px auto",width:"360px",height:"320px"}},[e._m(0),t("el-form",{ref:"userForm",staticStyle:{padding:"0 20px"},attrs:{model:e.user,rules:e.rules}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{size:"medium","prefix-icon":"el-icon-user"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{size:"medium","prefix-icon":"el-icon-lock","show-password":""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),t("el-form-item",[t("el-button",{staticStyle:{width:"100%","background-color":"dodgerblue",border:"1px solid dodgerblue",color:"white"},attrs:{size:"medium"},on:{click:e.login}},[e._v("登录")])],1),t("el-form-item",{staticStyle:{margin:"10px 0"}},[t("el-button",{staticStyle:{color:"orange"},attrs:{size:"medium",type:"text"},on:{click:e.handleRegister}},[e._v("立即注册")])],1)],1)],1),t("el-dialog",{attrs:{title:"找回密码",visible:e.dialogFormVisible,width:"400px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{staticStyle:{"padding-right":"20px"},attrs:{"label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户名"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.pass.username,callback:function(t){e.$set(e.pass,"username",t)},expression:"pass.username"}})],1),t("el-form-item",{attrs:{label:"手机号"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.pass.phone,callback:function(t){e.$set(e.pass,"phone",t)},expression:"pass.phone"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.passwordBack}},[e._v("重置密码")])],1)],1),t("el-dialog",{attrs:{title:"注册",visible:e.dialogFormVisible1,width:"400px"},on:{"update:visible":function(t){e.dialogFormVisible1=t}}},[t("el-form",{ref:"registerForm",staticStyle:{"padding-right":"20px"},attrs:{"label-width":"80px",model:e.register,rules:e.registerRules}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.register.username,callback:function(t){e.$set(e.register,"username",t)},expression:"register.username"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.register.password,callback:function(t){e.$set(e.register,"password",t)},expression:"register.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[t("el-input",{attrs:{autocomplete:"off","show-password":""},model:{value:e.register.confirmPassword,callback:function(t){e.$set(e.register,"confirmPassword",t)},expression:"register.confirmPassword"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible1=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.doRegister}},[e._v("注 册")])],1)],1)],1)},i=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{margin:"20px 0",color:"dodgerblue","text-align":"center","font-size":"30px"}},[t("b",[e._v("仓库管理系统")])])}],o=(s(7658),function(){var e=this,t=e._self._c;return t("div",{staticClass:"s-canvas"},[t("canvas",{attrs:{id:"s-canvas",width:e.contentWidth,height:e.contentHeight}})])}),a=[],l={name:"Identify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:28},fontSizeMax:{type:Number,default:40},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:40},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:112},contentHeight:{type:Number,default:40}},methods:{randomNum(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor(e,t){var s=this.randomNum(e,t),r=this.randomNum(e,t),i=this.randomNum(e,t);return"rgb("+s+","+r+","+i+")"},drawPic(){var e=document.getElementById("s-canvas"),t=e.getContext("2d");t.textBaseline="bottom",t.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),t.fillRect(0,0,this.contentWidth,this.contentHeight);for(let s=0;s<this.identifyCode.length;s++)this.drawText(t,this.identifyCode[s],s);this.drawLine(t),this.drawDot(t)},drawText(e,t,s){e.fillStyle=this.randomColor(this.colorMin,this.colorMax),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var r=(s+1)*(this.contentWidth/(this.identifyCode.length+1)),i=this.randomNum(this.fontSizeMax,this.contentHeight-5),o=this.randomNum(-30,30);e.translate(r,i),e.rotate(o*Math.PI/270),e.fillText(t,0,0),e.rotate(-o*Math.PI/270),e.translate(-r,-i)},drawLine(e){for(let t=0;t<2;t++)e.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot(e){for(let t=0;t<20;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{identifyCode(){this.drawPic()}},mounted(){this.drawPic()}},n=l,d=s(1001),u=(0,d.Z)(n,o,a,!1,null,"2ed71a64",null),m=u.exports,h={name:"Login",data(){return{user:{},pass:{},register:{},code:"",dialogFormVisible:!1,dialogFormVisible1:!1,identifyCode:"",identifyCodes:"3456789ABCDEFGHGKMNPQRSTUVWXY",rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},registerRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"}]}}},components:{Identify:m},mounted(){},methods:{login(){this.$refs["userForm"].validate((e=>{e&&this.request.post("/login",this.user).then((e=>{"200"===e.code?(localStorage.setItem("user",JSON.stringify(e.data)),this.$router.push("/"),this.$message.success("登录成功")):this.$message.error(e.msg)}))}))},handleRegister(){this.register={},this.dialogFormVisible1=!0},doRegister(){this.$refs["registerForm"].validate((e=>{e&&this.request.post("/register",this.register).then((e=>{"200"===e.code?(this.$message.success("注册成功"),this.dialogFormVisible1=!1):this.$message.error(e.msg)}))}))},handlePass(){this.dialogFormVisible=!0,this.pass={}},passwordBack(){this.request.put("/resetPassword",this.pass).then((e=>{"200"===e.code?(this.$message.success("重置密码成功，新密码为：123，请登录后尽快修改密码"),this.dialogFormVisible=!1):this.$message.error(e.msg)}))},refreshCode(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode(e,t){for(let s=0;s<t;s++)this.identifyCode+=this.identifyCodes[Math.floor(Math.random()*this.identifyCodes.length)]}}},c=h,p=(0,d.Z)(c,r,i,!1,null,null,null),f=p.exports}}]);
//# sourceMappingURL=387.c2edfbb2.js.map